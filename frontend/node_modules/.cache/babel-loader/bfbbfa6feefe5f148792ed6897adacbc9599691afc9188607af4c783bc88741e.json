{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://localhost:8000/auth/';\nconst login = async (username, password) => {\n  try {\n    const response = await axios.post(API_URL + 'login/', {\n      username,\n      password\n    });\n    if (response.data.access) {\n      localStorage.setItem('user', JSON.stringify(response.data));\n      localStorage.setItem('access_token', response.data.access);\n      localStorage.setItem('refresh_token', response.data.refresh);\n    }\n    return response.data;\n  } catch (error) {\n    var _error$response;\n    throw ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || {\n      detail: 'An error occurred during login'\n    };\n  }\n};\nconst logout = () => {\n  localStorage.removeItem('user');\n  localStorage.removeItem('access_token');\n  localStorage.removeItem('refresh_token');\n};\nconst getCurrentUser = () => {\n  return JSON.parse(localStorage.getItem('user'));\n};\nconst getUserProfile = async () => {\n  try {\n    const response = await axios.get(API_URL + 'profile/', {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('access_token')}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response2;\n    throw ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || {\n      detail: 'An error occurred while getting user profile'\n    };\n  }\n};\nconst signUp = async (username, email, password) => {\n  try {\n    const response = await axios.post(API_URL + 'signup/', {\n      username,\n      email,\n      password\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response3;\n    throw ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || {\n      detail: 'An error occurred during signup'\n    };\n  }\n};\nconst deleteAccount = async password => {\n  try {\n    const response = await axios.delete(API_URL + 'delete/', {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('access_token')}`\n      },\n      data: {\n        password\n      }\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response4;\n    throw ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data) || {\n      detail: 'An error occurred while deleting account'\n    };\n  }\n};\nconst refreshToken = async () => {\n  try {\n    const response = await axios.post(API_URL + 'login/refresh/', {\n      refresh: localStorage.getItem('refresh_token')\n    });\n    localStorage.setItem('access_token', response.data.access);\n    return response.data;\n  } catch (error) {\n    var _error$response5;\n    throw ((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.data) || {\n      detail: 'An error occurred while refreshing token'\n    };\n  }\n};\nconst authService = {\n  login,\n  logout,\n  getCurrentUser,\n  getUserProfile,\n  signUp,\n  deleteAccount,\n  refreshToken\n};\nexport default authService;","map":{"version":3,"names":["axios","API_URL","login","username","password","response","post","data","access","localStorage","setItem","JSON","stringify","refresh","error","_error$response","detail","logout","removeItem","getCurrentUser","parse","getItem","getUserProfile","get","headers","_error$response2","signUp","email","_error$response3","deleteAccount","delete","_error$response4","refreshToken","_error$response5","authService"],"sources":["/Users/samvedsajankila/projects/competeHub/CompeteHub/frontend/src/services/authService.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_URL = 'http://localhost:8000/auth/';\n\nconst login = async (username, password) => {\n  try {\n    const response = await axios.post(API_URL + 'login/', {\n      username,\n      password,\n    });\n    \n    if (response.data.access) {\n      localStorage.setItem('user', JSON.stringify(response.data));\n      localStorage.setItem('access_token', response.data.access);\n      localStorage.setItem('refresh_token', response.data.refresh);\n    }\n    \n    return response.data;\n  } catch (error) {\n    throw error.response?.data || { detail: 'An error occurred during login' };\n  }\n};\n\nconst logout = () => {\n  localStorage.removeItem('user');\n  localStorage.removeItem('access_token');\n  localStorage.removeItem('refresh_token');\n};\n\nconst getCurrentUser = () => {\n  return JSON.parse(localStorage.getItem('user'));\n};\n\nconst getUserProfile = async () => {\n  try {\n    const response = await axios.get(API_URL + 'profile/', {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('access_token')}`\n      }\n    });\n    return response.data;\n  } catch (error) {\n    throw error.response?.data || { detail: 'An error occurred while getting user profile' };\n  }\n};\n\nconst signUp = async (username, email, password) => {\n  try {\n    const response = await axios.post(API_URL + 'signup/', {\n      username,\n      email,\n      password\n    });\n    return response.data;\n  } catch (error) {\n    throw error.response?.data || { detail: 'An error occurred during signup' };\n  }\n};\n\nconst deleteAccount = async (password) => {\n  try {\n    const response = await axios.delete(API_URL + 'delete/', {\n      headers: {\n        'Authorization': `Bearer ${localStorage.getItem('access_token')}`\n      },\n      data: {\n        password\n      }\n    });\n    return response.data;\n  } catch (error) {\n    throw error.response?.data || { detail: 'An error occurred while deleting account' };\n  }\n};\n\nconst refreshToken = async () => {\n  try {\n    const response = await axios.post(API_URL + 'login/refresh/', {\n      refresh: localStorage.getItem('refresh_token')\n    });\n    localStorage.setItem('access_token', response.data.access);\n    return response.data;\n  } catch (error) {\n    throw error.response?.data || { detail: 'An error occurred while refreshing token' };\n  }\n};\n\nconst authService = {\n  login,\n  logout,\n  getCurrentUser,\n  getUserProfile,\n  signUp,\n  deleteAccount,\n  refreshToken,\n};\n\nexport default authService; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}